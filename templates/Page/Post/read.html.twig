{% extends 'Layout/base.html.twig' %}

{% block title %}{{ post.title }}{% endblock %}

{% block body %}
    <section class="bg-gradient-to-b from-gray-900 to-gray-950">
        <div class="max-w-4xl mx-auto px-6 py-20">
            <article class="bg-slate-900/40 backdrop-blur rounded-xl p-10 space-y-8">

                <header class="flex items-start justify-between gap-6">
                    <div>
                        <h1 class="text-3xl md:text-4xl font-semibold mb-2">
                            {{ post.title }}
                        </h1>

                        {% if post.author is defined %}
                            <p class="text-sm text-slate-400">
                                {{ post.author.username }}
                            </p>
                        {% endif %}
                    </div>

                    {% if is_granted('IS_MANAGEABLE', post) %}
                        <div class="flex gap-2">
                            <a
                                href="{{ path('app_post_update', { id: post.id }) }}"
                                class="px-3 py-1 text-sm border border-slate-600 rounded hover:border-slate-400"
                            >
                                Modifier
                            </a>

                            <form
                                method="post"
                                action="{{ path('app_post_delete', { id: post.id }) }}"
                                onsubmit="return confirm('Supprimer ce post ?');"
                            >
                                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ post.id) }}">
                                <button
                                    class="px-3 py-1 text-sm border border-red-500 text-red-400 rounded hover:bg-red-500 hover:text-white"
                                >
                                    Supprimer
                                </button>
                            </form>
                        </div>
                    {% endif %}
                </header>

                {% if post.url is not null %}
                    <img
                        src="{{ post.url }}"
                        alt="{{ post.title }} image"
                        class="w-full rounded-lg border border-slate-800"
                    >
                {% endif %}

                {% if post.content is not null %}
                    <div class="prose prose-invert max-w-none text-slate-300">
                        {{ post.content }}
                    </div>
                {% endif %}

            </article>
        </div>
    </section>
{% endblock body %}
